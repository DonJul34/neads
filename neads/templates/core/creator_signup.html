{% extends "base.html" %}
{% load static %}

{% block title %}Devenir créateur de contenu UGC chez Neads{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/creator_signup.css' %}">
{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <div class="card shadow-lg mb-4">
                <div class="card-header bg-primary text-white py-4">
                    <h1 class="h3 mb-0 text-center">Postule pour devenir créateur de contenu UGC chez Neads !</h1>
                </div>
                <div class="card-body p-4">
                    <div class="mb-4 text-center">
                        <p class="lead">Tu es passionné(e) par la création de contenu UGC sur les réseaux sociaux ?<br>
                        Tu maîtrises parfaitement les codes et tendances de TikTok et Instagram ?</p>
                        <p class="fs-5 fw-bold text-primary mb-5">Viens collaborer avec les plus belles marques !</p>
                    </div>
                    
                    {% if messages %}
                    <div class="messages">
                        {% for message in messages %}
                        <div class="alert alert-{{ message.tags }}">{{ message }}</div>
                        {% endfor %}
                    </div>
                    {% endif %}
                    
                    <form method="post" enctype="multipart/form-data" id="creator-signup-form" class="needs-validation" novalidate>
                        {% csrf_token %}
                        
                        <!-- Coordonnées -->
                        <div class="card mb-4">
                            <div class="card-header bg-light">
                                <h3 class="h5 mb-0">Tes coordonnées</h3>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ form.first_name.id_for_label }}" class="form-label">{{ form.first_name.label }} *</label>
                                        {{ form.first_name }}
                                        <div class="invalid-feedback">
                                            {% if form.first_name.errors %}{{ form.first_name.errors.0 }}{% else %}Ce champ est requis.{% endif %}
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ form.last_name.id_for_label }}" class="form-label">{{ form.last_name.label }} *</label>
                                        {{ form.last_name }}
                                        <div class="invalid-feedback">
                                            {% if form.last_name.errors %}{{ form.last_name.errors.0 }}{% else %}Ce champ est requis.{% endif %}
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ form.gender.id_for_label }}" class="form-label">{{ form.gender.label }} *</label>
                                        {{ form.gender }}
                                        <div class="invalid-feedback">
                                            {% if form.gender.errors %}{{ form.gender.errors.0 }}{% else %}Ce champ est requis.{% endif %}
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ form.birth_year.id_for_label }}" class="form-label">{{ form.birth_year.label }} *</label>
                                        {{ form.birth_year }}
                                        <div class="invalid-feedback">
                                            {% if form.birth_year.errors %}{{ form.birth_year.errors.0 }}{% else %}Ce champ est requis.{% endif %}
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-12 mb-3">
                                        <label for="{{ form.address.id_for_label }}" class="form-label">{{ form.address.label }} *</label>
                                        {{ form.address }}
                                        <div class="invalid-feedback">
                                            {% if form.address.errors %}{{ form.address.errors.0 }}{% else %}Ce champ est requis.{% endif %}
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-4 mb-3">
                                        <label for="{{ form.postal_code.id_for_label }}" class="form-label">{{ form.postal_code.label }} *</label>
                                        {{ form.postal_code }}
                                        <div class="invalid-feedback">
                                            {% if form.postal_code.errors %}{{ form.postal_code.errors.0 }}{% else %}Ce champ est requis.{% endif %}
                                        </div>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="{{ form.city.id_for_label }}" class="form-label">{{ form.city.label }} *</label>
                                        {{ form.city }}
                                        <div class="invalid-feedback">
                                            {% if form.city.errors %}{{ form.city.errors.0 }}{% else %}Ce champ est requis.{% endif %}
                                        </div>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="{{ form.country.id_for_label }}" class="form-label">{{ form.country.label }} *</label>
                                        {{ form.country }}
                                        <div class="invalid-feedback">
                                            {% if form.country.errors %}{{ form.country.errors.0 }}{% else %}Ce champ est requis.{% endif %}
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ form.email.id_for_label }}" class="form-label">{{ form.email.label }} *</label>
                                        {{ form.email }}
                                        <div class="invalid-feedback">
                                            {% if form.email.errors %}{{ form.email.errors.0 }}{% else %}Ce champ est requis.{% endif %}
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ form.phone.id_for_label }}" class="form-label">{{ form.phone.label }} *</label>
                                        <div class="input-group">
                                            <span class="input-group-text">France +33</span>
                                            {{ form.phone }}
                                        </div>
                                        <div class="invalid-feedback">
                                            {% if form.phone.errors %}{{ form.phone.errors.0 }}{% else %}Ce champ est requis.{% endif %}
                                        </div>
                                    </div>
                                </div>
                                
                                {{ form.latitude }}
                                {{ form.longitude }}
                            </div>
                        </div>
                        
                        <!-- À propos de toi -->
                        <div class="card mb-4">
                            <div class="card-header bg-light">
                                <h3 class="h5 mb-0">À propos de toi</h3>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label for="{{ form.baseline.id_for_label }}" class="form-label">{{ form.baseline.label }} *</label>
                                    {{ form.baseline }}
                                    <div class="character-counter" id="baseline-counter">Vous avez utilisé 0 caractères sur les 50 alloués. Il vous reste 50.</div>
                                    <div class="invalid-feedback">
                                        {% if form.baseline.errors %}{{ form.baseline.errors.0 }}{% else %}Ce champ est requis.{% endif %}
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="{{ form.bio.id_for_label }}" class="form-label">{{ form.bio.label }} *</label>
                                    {{ form.bio }}
                                    <div class="character-counter" id="bio-counter">Vous avez utilisé 0 caractères sur les 1000 alloués. Il vous reste 1000.</div>
                                    <div class="invalid-feedback">
                                        {% if form.bio.errors %}{{ form.bio.errors.0 }}{% else %}Ce champ est requis.{% endif %}
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-4 mb-3">
                                        <label for="{{ form.tiktok_link.id_for_label }}" class="form-label">{{ form.tiktok_link.label }}</label>
                                        {{ form.tiktok_link }}
                                        <div class="invalid-feedback">
                                            {% if form.tiktok_link.errors %}{{ form.tiktok_link.errors.0 }}{% endif %}
                                        </div>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="{{ form.instagram_link.id_for_label }}" class="form-label">{{ form.instagram_link.label }}</label>
                                        {{ form.instagram_link }}
                                        <div class="invalid-feedback">
                                            {% if form.instagram_link.errors %}{{ form.instagram_link.errors.0 }}{% endif %}
                                        </div>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="{{ form.youtube_link.id_for_label }}" class="form-label">{{ form.youtube_link.label }}</label>
                                        {{ form.youtube_link }}
                                        <div class="invalid-feedback">
                                            {% if form.youtube_link.errors %}{{ form.youtube_link.errors.0 }}{% endif %}
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="{{ form.featured_image.id_for_label }}" class="form-label">{{ form.featured_image.label }} *</label>
                                    <div class="upload-zone">
                                        <div class="upload-prompt">
                                            <i class="fas fa-cloud-upload-alt"></i>
                                            <p>Cliquez ou déplacez un fichier dans cette zone pour le téléverser.</p>
                                        </div>
                                        {{ form.featured_image }}
                                    </div>
                                    <div class="invalid-feedback">
                                        {% if form.featured_image.errors %}{{ form.featured_image.errors.0 }}{% else %}Ce champ est requis.{% endif %}
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">{{ form.domains.label }} *</label>
                                    <div class="domains-list">
                                        {{ form.domains }}
                                    </div>
                                    <small class="text-muted">{{ form.domains.help_text }}</small>
                                    <div class="invalid-feedback">
                                        {% if form.domains.errors %}{{ form.domains.errors.0 }}{% else %}Veuillez sélectionner au moins un domaine.{% endif %}
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="{{ form.equipment.id_for_label }}" class="form-label">{{ form.equipment.label }} *</label>
                                    {{ form.equipment }}
                                    <div class="invalid-feedback">
                                        {% if form.equipment.errors %}{{ form.equipment.errors.0 }}{% else %}Ce champ est requis.{% endif %}
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">{{ form.can_invoice.label }} *</label>
                                    <div class="can-invoice-options">
                                        {% for choice in form.can_invoice %}
                                        <div class="form-check">
                                            {{ choice.tag }}
                                            <label class="form-check-label" for="{{ choice.id_for_label }}">
                                                {{ choice.choice_label }}
                                            </label>
                                        </div>
                                        {% endfor %}
                                    </div>
                                    <div class="invalid-feedback">
                                        {% if form.can_invoice.errors %}{{ form.can_invoice.errors.0 }}{% else %}Ce champ est requis.{% endif %}
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="{{ form.previous_clients.id_for_label }}" class="form-label">{{ form.previous_clients.label }} *</label>
                                    {{ form.previous_clients }}
                                    <div class="invalid-feedback">
                                        {% if form.previous_clients.errors %}{{ form.previous_clients.errors.0 }}{% else %}Ce champ est requis.{% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Portfolio -->
                        <div class="card mb-4">
                            <div class="card-header bg-light">
                                <h3 class="h5 mb-0">Portfolio</h3>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label for="{{ form.video_files.id_for_label }}" class="form-label">{{ form.video_files.label }} *</label>
                                    <div class="upload-zone multiple-files">
                                        <div class="upload-prompt">
                                            <i class="fas fa-file-video"></i>
                                            <p>Cliquez ou déplacez les fichiers vers cette zone pour les téléverser.</p>
                                            <small>{{ form.video_files.help_text }}</small>
                                        </div>
                                        {{ form.video_files }}
                                    </div>
                                    <div class="selected-files" id="video-files-preview"></div>
                                    <div class="invalid-feedback">
                                        {% if form.video_files.errors %}{{ form.video_files.errors.0 }}{% else %}Veuillez téléverser au moins 3 vidéos.{% endif %}
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="{{ form.image_files.id_for_label }}" class="form-label">{{ form.image_files.label }} *</label>
                                    <div class="upload-zone multiple-files">
                                        <div class="upload-prompt">
                                            <i class="fas fa-file-image"></i>
                                            <p>Cliquez ou déplacez les fichiers vers cette zone pour les téléverser.</p>
                                            <small>{{ form.image_files.help_text }}</small>
                                        </div>
                                        {{ form.image_files }}
                                    </div>
                                    <div class="selected-files" id="image-files-preview"></div>
                                    <div class="invalid-feedback">
                                        {% if form.image_files.errors %}{{ form.image_files.errors.0 }}{% else %}Veuillez téléverser au moins 3 images.{% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Conditions et envoi -->
                        <div class="mb-4">
                            <div class="form-check mb-3">
                                {{ form.accept_terms }}
                                <label class="form-check-label" for="{{ form.accept_terms.id_for_label }}">
                                    {{ form.accept_terms.label }}
                                </label>
                                <div class="invalid-feedback">
                                    {% if form.accept_terms.errors %}{{ form.accept_terms.errors.0 }}{% else %}Vous devez accepter les conditions d'utilisation.{% endif %}
                                </div>
                            </div>
                            
                            <div class="d-grid">
                                <button type="submit" class="btn btn-primary btn-lg">Envoyer</button>
                            </div>
                        </div>
                        
                        <div class="text-center mt-4">
                            <p class="text-muted">
                                <a href="#" class="text-decoration-none">Mentions légales</a> – 
                                <a href="#" class="text-decoration-none">Politique de confidentialité</a>
                            </p>
                            <div class="social-links mt-3">
                                <a href="#" class="me-2"><i class="fab fa-tiktok"></i></a>
                                <a href="#" class="me-2"><i class="fab fa-instagram"></i></a>
                                <a href="#" class="me-2"><i class="fab fa-linkedin"></i></a>
                                <a href="#"><i class="fab fa-youtube"></i></a>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://maps.googleapis.com/maps/api/js?key={{ google_api_key }}&libraries=places"></script>
<script>
// Initialisation de l'autocomplétion Google Places
document.addEventListener('DOMContentLoaded', function() {
    // Autocomplétion de l'adresse
    const addressInput = document.getElementById('full-address-input');
    if (addressInput) {
        const autocomplete = new google.maps.places.Autocomplete(addressInput, {
            types: ['address'],
            fields: ['formatted_address', 'geometry']
        });
        
        autocomplete.addListener('place_changed', function() {
            const place = autocomplete.getPlace();
            if (place.geometry) {
                document.getElementById('id_latitude').value = place.geometry.location.lat();
                document.getElementById('id_longitude').value = place.geometry.location.lng();
            }
        });
    }
    
    // Validation du formulaire
    const form = document.getElementById('creator-signup-form');
    form.addEventListener('submit', function(event) {
        if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
        }
        form.classList.add('was-validated');
    });
    
    // Compteurs de caractères
    const baselineInput = document.getElementById('id_baseline');
    const baselineCounter = document.getElementById('baseline-counter');
    const bioInput = document.getElementById('id_bio');
    const bioCounter = document.getElementById('bio-counter');
    
    function updateCounter(input, counter, maxLength) {
        const length = input.value.length;
        const remaining = maxLength - length;
        counter.textContent = `Vous avez utilisé ${length} caractères sur les ${maxLength} alloués. Il vous reste ${remaining}.`;
    }
    
    if (baselineInput && baselineCounter) {
        baselineInput.addEventListener('input', function() {
            updateCounter(this, baselineCounter, 50);
        });
        updateCounter(baselineInput, baselineCounter, 50);
    }
    
    if (bioInput && bioCounter) {
        bioInput.addEventListener('input', function() {
            updateCounter(this, bioCounter, 1000);
        });
        updateCounter(bioInput, bioCounter, 1000);
    }
    
    // Prévisualisation des fichiers
    function updateFilePreview(input, previewContainer) {
        const container = document.getElementById(previewContainer);
        container.innerHTML = '';
        
        for (let i = 0; i < input.files.length; i++) {
            const file = input.files[i];
            const filePreview = document.createElement('div');
            filePreview.className = 'file-preview';
            filePreview.innerHTML = `
                <span class="file-name">${file.name}</span>
                <span class="file-size">${(file.size / (1024 * 1024)).toFixed(2)} MB</span>
            `;
            container.appendChild(filePreview);
        }
    }
    
    const videoFilesInput = document.getElementById('id_video_files');
    const imageFilesInput = document.getElementById('id_image_files');
    
    if (videoFilesInput) {
        videoFilesInput.addEventListener('change', function() {
            updateFilePreview(this, 'video-files-preview');
        });
    }
    
    if (imageFilesInput) {
        imageFilesInput.addEventListener('change', function() {
            updateFilePreview(this, 'image-files-preview');
        });
    }
});
</script>
{% endblock %} 